import{g as r}from"./react-vendor-RxPattl9.js";import{c as e}from"./index-BYAPVeao.js";import{r as t}from"./index-SnXRF_kC.js";var i,n={exports:{}};var a,o=(i||(i=1,a=n,function(){var r,i,n,o,f,s,h={};function d(){}a.exports=h,r="function"==typeof e?t():self.pako,i=h,n=r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},f=function(){function r(r){this.message="JPEG error: "+r}return r.prototype=Error(),r.prototype.name="JpegError",r.constructor=r}(),s=function(){function r(r,e){this.message=r,this.g=e}return r.prototype=Error(),r.prototype.name="DNLMarkerError",r.constructor=r}(),function(){function r(){this.M=null,this.B=-1}function e(r,e){for(var t,i,n=0,a=[],o=16;0<o&&!r[o-1];)o--;a.push({children:[],index:0});var f,s=a[0];for(t=0;t<o;t++){for(i=0;i<r[t];i++){for((s=a.pop()).children[s.index]=e[n];0<s.index;)s=a.pop();for(s.index++,a.push(s);a.length<=t;)a.push(f={children:[],index:0}),s.children[s.index]=f.children,s=f;n++}t+1<o&&(a.push(f={children:[],index:0}),s.children[s.index]=f.children,s=f)}return a[0].children}function t(r,e,t,i,n,d,u,c,l){function v(){if(0<M)return M--,k>>M&1;if(255===(k=r[e++])){var i=r[e++];if(i){if(220===i&&I){e+=2;var n=r[e++]<<8|r[e++];if(0<n&&n!==t.g)throw new s("Found DNL marker (0xFFDC) while parsing scan data",n)}throw new f("unexpected marker "+(k<<8|i).toString(16))}}return M=7,k>>>7}function g(r){for(;;){if("number"==typeof(r=r[v()]))return r;if("object"!==(void 0===r?"undefined":o(r)))throw new f("invalid huffman sequence")}}function w(r){for(var e=0;0<r;)e=e<<1|v(),r--;return e}function _(r){if(1===r)return 1===v()?1:-1;var e=w(r);return e>=1<<r-1?e:e+(-1<<r)+1}for(var p,b,m,y,U,E,A,I=9<arguments.length&&void 0!==arguments[9]&&arguments[9],B=t.P,D=e,k=0,M=0,N=0,F=0,G=i.length,x=t.S?0===d?0===c?function(r,e){var t=g(r.D);t=0===t?0:_(t)<<l,r.a[e]=r.m+=t}:function(r,e){r.a[e]|=v()<<l}:0===c?function(r,e){if(0<N)N--;else for(var t=d;t<=u;){var i=g(r.o),n=15&i;if(i>>=4,0===n){if(15>i){N=w(i)+(1<<i)-1;break}t+=16}else t+=i,r.a[e+h[t]]=_(n)*(1<<l),t++}}:function(r,e){for(var t,i=d,n=0;i<=u;){t=e+h[i];var a=0>r.a[t]?-1:1;switch(F){case 0:if(t=15&(n=g(r.o)),n>>=4,0===t)15>n?(N=w(n)+(1<<n),F=4):(n=16,F=1);else{if(1!==t)throw new f("invalid ACn encoding");p=_(t),F=n?2:3}continue;case 1:case 2:r.a[t]?r.a[t]+=a*(v()<<l):0===--n&&(F=2===F?3:0);break;case 3:r.a[t]?r.a[t]+=a*(v()<<l):(r.a[t]=p<<l,F=0);break;case 4:r.a[t]&&(r.a[t]+=a*(v()<<l))}i++}4===F&&0===--N&&(F=0)}:function(r,e){var t=g(r.D);for(t=0===t?0:_(t),r.a[e]=r.m+=t,t=1;64>t;){var i=g(r.o),n=15&i;if(i>>=4,0===n){if(15>i)break;t+=16}else t+=i,r.a[e+h[t]]=_(n),t++}},S=0,L=1===G?i[0].c*i[0].l:B*t.O;S<L;){var C=n?Math.min(L-S,n):L;for(b=0;b<G;b++)i[b].m=0;if(N=0,1===G){var O=i[0];for(U=0;U<C;U++)x(O,64*((O.c+1)*(S/O.c|0)+S%O.c)),S++}else for(U=0;U<C;U++){for(b=0;b<G;b++)for(E=(O=i[b]).h,A=O.j,m=0;m<A;m++)for(y=0;y<E;y++)x(O,64*((O.c+1)*((S/B|0)*O.j+m)+(S%B*O.h+y)));S++}if(M=0,(O=a(r,e))&&O.f&&((0,_util.warn)("decodeScan - unexpected MCU data, current marker is: "+O.f),e=O.offset),!(O=O&&O.F)||65280>=O)throw new f("marker was not found");if(!(65488<=O&&65495>=O))break;e+=2}return(O=a(r,e))&&O.f&&((0,_util.warn)("decodeScan - unexpected Scan data, current marker is: "+O.f),e=O.offset),e-D}function n(r,e){for(var t=e.c,i=e.l,n=new Int16Array(64),a=0;a<i;a++)for(var o=0;o<t;o++){var s=64*((e.c+1)*a+o),h=n,d=e.G,u=e.a;if(!d)throw new f("missing required Quantization Table.");for(var c=0;64>c;c+=8){var l=u[s+c],v=u[s+c+1],g=u[s+c+2],w=u[s+c+3],_=u[s+c+4],p=u[s+c+5],b=u[s+c+6],m=u[s+c+7];if(l*=d[c],0===(v|g|w|_|p|b|m))l=5793*l+512>>10,h[c]=l,h[c+1]=l,h[c+2]=l,h[c+3]=l,h[c+4]=l,h[c+5]=l,h[c+6]=l,h[c+7]=l;else{v*=d[c+1],g*=d[c+2],w*=d[c+3],_*=d[c+4],p*=d[c+5];var y=5793*l+128>>8,U=5793*_+128>>8,E=g,A=b*=d[c+6];U=(y=y+U+1>>1)-U,l=3784*E+1567*A+128>>8,E=1567*E-3784*A+128>>8,p=(_=(_=2896*(v-(m*=d[c+7]))+128>>8)+(p<<=4)+1>>1)-p,w=(m=(m=2896*(v+m)+128>>8)+(w<<=4)+1>>1)-w,A=(y=y+(A=l)+1>>1)-A,E=(U=U+E+1>>1)-E,l=2276*_+3406*m+2048>>12,_=3406*_-2276*m+2048>>12,m=l,l=799*w+4017*p+2048>>12,w=4017*w-799*p+2048>>12,p=l,h[c]=y+m,h[c+7]=y-m,h[c+1]=U+p,h[c+6]=U-p,h[c+2]=E+w,h[c+5]=E-w,h[c+3]=A+_,h[c+4]=A-_}}for(d=0;8>d;++d)l=h[d],0===((v=h[d+8])|(g=h[d+16])|(w=h[d+24])|(_=h[d+32])|(p=h[d+40])|(b=h[d+48])|(m=h[d+56]))?(l=-2040>(l=5793*l+8192>>14)?0:2024<=l?255:l+2056>>4,u[s+d]=l,u[s+d+8]=l,u[s+d+16]=l,u[s+d+24]=l,u[s+d+32]=l,u[s+d+40]=l,u[s+d+48]=l,u[s+d+56]=l):(y=5793*l+2048>>12,U=5793*_+2048>>12,l=3784*(E=g)+1567*(A=b)+2048>>12,E=1567*E-3784*A+2048>>12,A=l,p=(_=(_=2896*(v-m)+2048>>12)+p+1>>1)-p,w=(m=(m=2896*(v+m)+2048>>12)+w+1>>1)-w,l=2276*_+3406*m+2048>>12,_=3406*_-2276*m+2048>>12,m=l,l=799*w+4017*p+2048>>12,w=4017*w-799*p+2048>>12,v=(U=(U=(y=4112+(y+U+1>>1))-U)+E+1>>1)+(p=l),b=U-p,p=(E=U-E)-w,l=16>(l=(y=y+A+1>>1)+m)?0:4080<=l?255:l>>4,v=16>v?0:4080<=v?255:v>>4,g=16>(g=E+w)?0:4080<=g?255:g>>4,w=16>(w=(A=y-A)+_)?0:4080<=w?255:w>>4,_=16>(_=A-_)?0:4080<=_?255:_>>4,p=16>p?0:4080<=p?255:p>>4,b=16>b?0:4080<=b?255:b>>4,m=16>(m=y-m)?0:4080<=m?255:m>>4,u[s+d]=l,u[s+d+8]=v,u[s+d+16]=g,u[s+d+24]=w,u[s+d+32]=_,u[s+d+40]=p,u[s+d+48]=b,u[s+d+56]=m)}return e.a}function a(r,e){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e,i=r.length-1;if(t=t<e?t:e,e>=i)return null;var n=r[e]<<8|r[e+1];if(65472<=n&&65534>=n)return{f:null,F:n,offset:e};for(var a=r[t]<<8|r[t+1];!(65472<=a&&65534>=a);){if(++t>=i)return null;a=r[t]<<8|r[t+1]}return{f:n.toString(16),F:a,offset:t}}var h=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);r.prototype={parse:function(r){function i(){var e=r[l]<<8|r[l+1];return l+=2,e}function o(){var e=i(),t=a(r,e=l+e-2,l);return t&&t.f&&((0,_util.warn)("readDataBlock - incorrect length, current marker is: "+t.f),e=t.offset),e=r.subarray(l,e),l+=e.length,e}function d(r){for(var e=Math.ceil(r.v/8/r.s),t=Math.ceil(r.g/8/r.u),i=0;i<r.b.length;i++){D=r.b[i];var n=Math.ceil(Math.ceil(r.v/8)*D.h/r.s),a=Math.ceil(Math.ceil(r.g/8)*D.j/r.u);D.a=new Int16Array(64*t*D.j*(e*D.h+1)),D.c=n,D.l=a}r.P=e,r.O=t}var u=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).N,c=void 0===u?null:u,l=0,v=null,g=0;u=[];var w=[],_=[],p=i();if(65496!==p)throw new f("SOI not found");for(p=i();65497!==p;){switch(p){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var b=o();65518===p&&65===b[0]&&100===b[1]&&111===b[2]&&98===b[3]&&101===b[4]&&(v={version:b[5]<<8|b[6],Y:b[7]<<8|b[8],Z:b[9]<<8|b[10],W:b[11]});break;case 65499:p=i()+l-2;for(var m;l<p;){var y=r[l++],U=new Uint16Array(64);if(y>>4){if(1!=y>>4)throw new f("DQT - invalid table spec");for(b=0;64>b;b++)U[m=h[b]]=i()}else for(b=0;64>b;b++)U[m=h[b]]=r[l++];u[15&y]=U}break;case 65472:case 65473:case 65474:if(E)throw new f("Only single frame JPEGs supported");i();var E={};for(E.X=65473===p,E.S=65474===p,E.precision=r[l++],p=i(),E.g=c||p,E.v=i(),E.b=[],E.C={},b=r[l++],p=U=y=0;p<b;p++){m=r[l];var A=r[l+1]>>4,I=15&r[l+1];y<A&&(y=A),U<I&&(U=I),A=E.b.push({h:A,j:I,T:r[l+2],G:null}),E.C[m]=A-1,l+=3}E.s=y,E.u=U,d(E);break;case 65476:for(m=i(),p=2;p<m;){for(y=r[l++],U=new Uint8Array(16),b=A=0;16>b;b++,l++)A+=U[b]=r[l];for(I=new Uint8Array(A),b=0;b<A;b++,l++)I[b]=r[l];p+=17+A,(y>>4?w:_)[15&y]=e(U,I)}break;case 65501:i();var B=i();break;case 65498:for(b=1===++g&&!c,i(),y=r[l++],m=[],p=0;p<y;p++){U=E.C[r[l++]];var D=E.b[U];U=r[l++],D.D=_[U>>4],D.o=w[15&U],m.push(D)}p=r[l++],y=r[l++],U=r[l++];try{var k=t(r,l,E,m,B,p,y,U>>4,15&U,b);l+=k}catch(M){if(M instanceof s)return(0,_util.warn)('Attempting to re-parse JPEG image using "scanLines" parameter found in DNL marker (0xFFDC) segment.'),this.parse(r,{N:M.g});throw M}break;case 65500:l+=4;break;case 65535:255!==r[l]&&l--;break;default:if(255===r[l-3]&&192<=r[l-2]&&254>=r[l-2])l-=3;else{if(!(b=a(r,l-2))||!b.f)throw new f("unknown marker "+p.toString(16));(0,_util.warn)("JpegImage.parse - unexpected data, current marker is: "+b.f),l=b.offset}}p=i()}for(this.width=E.v,this.height=E.g,this.A=v,this.b=[],p=0;p<E.b.length;p++)(B=u[(D=E.b[p]).T])&&(D.G=B),this.b.push({R:n(0,D),U:D.h/E.s,V:D.j/E.u,c:D.c,l:D.l});this.i=this.b.length},L:function(r,e){var t,i,n=this.width/r,a=this.height/e,o=this.b.length,f=r*e*o,s=new Uint8ClampedArray(f),h=new Uint32Array(r);for(i=0;i<o;i++){var d=this.b[i],u=d.U*n,c=d.V*a,l=i,v=d.R,g=d.c+1<<3;for(t=0;t<r;t++)d=0|t*u,h[t]=(4294967288&d)<<3|7&d;for(u=0;u<e;u++)for(d=g*(4294967288&(d=0|u*c))|(7&d)<<3,t=0;t<r;t++)s[l]=v[d+h[t]],l+=o}if(a=this.M)for(i=0;i<f;)for(n=d=0;d<o;d++,i++,n+=2)s[i]=(s[i]*a[n]>>8)+a[n+1];return s},w:function(){return this.A?!!this.A.W:3===this.i?0!==this.B:1===this.B},I:function(r){for(var e,t,i,n=0,a=r.length;n<a;n+=3)e=r[n],t=r[n+1],i=r[n+2],r[n]=e-179.456+1.402*i,r[n+1]=e+135.459-.344*t-.714*i,r[n+2]=e-226.816+1.772*t;return r},K:function(r){for(var e,t,i,n,a=0,o=0,f=r.length;o<f;o+=4)e=r[o],t=r[o+1],i=r[o+2],n=r[o+3],r[a++]=t*(-660635669420364e-19*t+.000437130475926232*i-54080610064599e-18*e+.00048449797120281*n-.154362151871126)-122.67195406894+i*(-.000957964378445773*i+.000817076911346625*e-.00477271405408747*n+1.53380253221734)+e*(.000961250184130688*e-.00266257332283933*n+.48357088451265)+n*(-.000336197177618394*n+.484791561490776),r[a++]=107.268039397724+t*(219927104525741e-19*t-.000640992018297945*i+.000659397001245577*e+.000426105652938837*n-.176491792462875)+i*(-.000778269941513683*i+.00130872261408275*e+.000770482631801132*n-.151051492775562)+e*(.00126935368114843*e-.00265090189010898*n+.25802910206845)+n*(-.000318913117588328*n-.213742400323665),r[a++]=t*(-.000570115196973677*t-263409051004589e-19*i+.0020741088115012*e-.00288260236853442*n+.814272968359295)-20.810012546947+i*(-153496057440975e-19*i-.000132689043961446*e+.000560833691242812*n-.195152027534049)+e*(.00174418132927582*e-.00255243321439347*n+.116935020465145)+n*(-.000343531996510555*n+.24165260232407);return r.subarray(0,a)},J:function(r){for(var e,t,i,n=0,a=r.length;n<a;n+=4)e=r[n],t=r[n+1],i=r[n+2],r[n]=434.456-e-1.402*i,r[n+1]=119.541-e+.344*t+.714*i,r[n+2]=481.816-e-1.772*t;return r},H:function(r){for(var e,t,i,n,a=0,o=1/255,f=0,s=r.length;f<s;f+=4)e=r[f]*o,t=r[f+1]*o,i=r[f+2]*o,n=r[f+3]*o,r[a++]=255+e*(-4.387332384609988*e+54.48615194189176*t+18.82290502165302*i+212.25662451639585*n-285.2331026137004)+t*(1.7149763477362134*t-5.6096736904047315*i-17.873870861415444*n-5.497006427196366)+i*(-2.5217340131683033*i-21.248923337353073*n+17.5119270841813)-n*(21.86122147463605*n+189.48180835922747),r[a++]=255+e*(8.841041422036149*e+60.118027045597366*t+6.871425592049007*i+31.159100130055922*n-79.2970844816548)+t*(-15.310361306967817*t+17.575251261109482*i+131.35250912493976*n-190.9453302588951)+i*(4.444339102852739*i+9.8632861493405*n-24.86741582555878)-n*(20.737325471181034*n+187.80453709719578),r[a++]=255+e*(.8842522430003296*e+8.078677503112928*t+30.89978309703729*i-.23883238689178934*n-14.183576799673286)+t*(10.49593273432072*t+63.02378494754052*i+50.606957656360734*n-112.23884253719248)+i*(.03296041114873217*i+115.60384449646641*n-193.58209356861505)-n*(22.33816807309886*n+180.12613974708367);return r.subarray(0,a)},getData:function(r,e,t){if(4<this.i)throw new f("Unsupported color mode");if(r=this.L(r,e),1===this.i&&t){t=r.length,e=new Uint8ClampedArray(3*t);for(var i=0,n=0;n<t;n++){var a=r[n];e[i++]=a,e[i++]=a,e[i++]=a}return e}if(3===this.i&&this.w())return this.I(r);if(4===this.i){if(this.w())return t?this.K(r):this.J(r);if(t)return this.H(r)}return r}},i.JpegDecoder=r}(),i.encodeImage=function(r,e,t,n){var a={t256:[e],t257:[t],t258:[8,8,8,8],t259:[1],t262:[2],t273:[1e3],t277:[4],t278:[t],t279:[e*t*4],t282:[1],t283:[1],t284:[1],t286:[0],t287:[0],t296:[1],t305:["Photopea (UTIF.js)"],t338:[1]};if(n)for(var o in n)a[o]=n[o];var f=new Uint8Array(i.encode([a])),s=new Uint8Array(r),h=new Uint8Array(1e3+e*t*4);for(o=0;o<f.length;o++)h[o]=f[o];for(o=0;o<s.length;o++)h[1e3+o]=s[o];return h.buffer},i.encode=function(r){var e=new Uint8Array(2e4),t=4,n=i._binBE;e[0]=77,e[1]=77,e[3]=42;var a=8;n.writeUint(e,t,a),t+=4;for(var o=0;o<r.length;o++){var f=i._writeIFD(n,e,a,r[o]);a=f[1],o<r.length-1&&n.writeUint(e,f[0],a)}return e.slice(0,a).buffer},i.decode=function(r){i.decode._decodeG3.allow2D=null;var e=new Uint8Array(r),t=0,n=i._binBE.readASCII(e,t,2);t+=2;var a="II"==n?i._binLE:i._binBE;a.readUshort(e,t),t+=2;var o=a.readUint(e,t);t+=4;for(var f=[];;){var s=i._readIFD(a,e,o,f,0,!1);if(0==(o=a.readUint(e,s)))break}return f},i.decodeImage=function(r,e,t){var n=new Uint8Array(r),a=i._binBE.readASCII(n,0,2);if(null!=e.t256){e.isLE="II"==a,e.width=e.t256[0],e.height=e.t257[0];var o,f=e.t259?e.t259[0]:1,s=e.t266?e.t266[0]:1;e.t284&&e.t284[0],o=e.t258?Math.min(32,e.t258[0])*e.t258.length:e.t277?e.t277[0]:1,1==f&&null!=e.t279&&e.t278&&32803==e.t262[0]&&(o=Math.round(8*e.t279[0]/(e.width*e.t278[0])));var h=8*Math.ceil(e.width*o/8),d=e.t273;null==d&&(d=e.t324);var u=e.t279;1==f&&1==d.length&&(u=[e.height*(h>>>3)]),null==u&&(u=e.t325);var c=new Uint8Array(e.height*(h>>>3)),l=0;if(null!=e.t322){for(var v=e.t322[0],g=e.t323[0],w=Math.floor((e.width+v-1)/v),_=Math.floor((e.height+g-1)/g),p=new Uint8Array(0|Math.ceil(v*g*o/8)),b=0;b<_;b++)for(var m=0;m<w;m++){for(var y=b*w+m,U=0;U<p.length;U++)p[U]=0;i.decode._decompress(e,t,n,d[y],u[y],f,p,0,s),6==f?c=p:i._copyTile(p,0|Math.ceil(v*o/8),g,c,0|Math.ceil(e.width*o/8),e.height,0|Math.ceil(m*v*o/8),b*g)}l=8*c.length}else{var E=e.t278?e.t278[0]:e.height;for(E=Math.min(E,e.height),y=0;y<d.length;y++)i.decode._decompress(e,t,n,d[y],u[y],f,c,0|Math.ceil(l/8),s),l+=h*E;l=Math.min(l,8*c.length)}e.data=new Uint8Array(c.buffer,0,0|Math.ceil(l/8))}},i.decode._decompress=function(r,e,t,a,o,f,s,h,d){if(1==f||o==s.length&&32767!=f)for(var u=0;u<o;u++)s[h+u]=t[a+u];else if(3==f)i.decode._decodeG3(t,a,o,s,h,r.width,d);else if(4==f)i.decode._decodeG4(t,a,o,s,h,r.width,d);else if(5==f)i.decode._decodeLZW(t,a,s,h);else if(6==f)i.decode._decodeOldJPEG(r,t,a,o,s,h);else if(7==f)i.decode._decodeNewJPEG(r,t,a,o,s,h);else if(8==f)for(var c=new Uint8Array(t.buffer,a,o),l=n.inflate(c),v=0;v<l.length;v++)s[h+v]=l[v];else 32767==f?i.decode._decodeARW(r,t,a,o,s,h):32773==f?i.decode._decodePackBits(t,a,o,s,h):32809==f?i.decode._decodeThunder(t,a,o,s,h):34713==f&&i.decode._decodeNikon(r,e,t,a,o,s,h);var g=r.t258?Math.min(32,r.t258[0]):1,w=r.t277?r.t277[0]:1,_=g*w>>>3,p=r.t278?r.t278[0]:r.height,b=Math.ceil(g*w*r.width/8);if(16==g&&!r.isLE&&null==r.t33422)for(var m=0;m<p;m++)for(var y=h+m*b,U=1;U<b;U+=2){var E=s[y+U];s[y+U]=s[y+U-1],s[y+U-1]=E}if(r.t317&&2==r.t317[0])for(m=0;m<p;m++){var A=h+m*b;if(16==g)for(u=_;u<b;u+=2){var I=(s[A+u+1]<<8|s[A+u])+(s[A+u-_+1]<<8|s[A+u-_]);s[A+u]=255&I,s[A+u+1]=I>>>8&255}else if(3==w)for(u=3;u<b;u+=3)s[A+u]=s[A+u]+s[A+u-3]&255,s[A+u+1]=s[A+u+1]+s[A+u-2]&255,s[A+u+2]=s[A+u+2]+s[A+u-1]&255;else for(u=_;u<b;u++)s[A+u]=s[A+u]+s[A+u-_]&255}},i.decode._ljpeg_diff=function(r,e,t){var n,a,o=i.decode._getbithuff;return n=o(r,e,t[0],t),(a=o(r,e,n,0))&1<<n-1||(a-=(1<<n)-1),a},i.decode._decodeARW=function(r,e,t,n,a,o){var f=r.t256[0],s=r.t257[0],h=r.t258[0],d=r.isLE?i._binLE:i._binBE;if(f*s==n||f*s*1.5==n)if(f*s*1.5!=n){var u,c,l,v,g,w,_,p,b=new Uint16Array(16),m=new Uint8Array(f+1);for(k=0;k<s;k++){for(var y=0;y<f;y++)m[y]=e[t++];for(p=0,D=0;D<f-30;p+=16){for(c=2047&(u=d.readUint(m,p)),l=2047&u>>>11,v=15&u>>>22,g=15&u>>>26,w=0;w<4&&128<<w<=c-l;w++);for(_=30,U=0;U<16;U++)U==v?b[U]=c:U==g?b[U]=l:(b[U]=((d.readUshort(m,p+(_>>3))>>>(7&_)&127)<<w)+l,b[U]>2047&&(b[U]=2047),_+=7);for(U=0;U<16;U++,D+=2)C=b[U]<<1,i.decode._putsF(a,(k*f+D)*h,C<<16-h);D-=1&D?1:31}}}else for(var U=0;U<n;U+=3){var E=e[t+U+0],A=e[t+U+1],I=e[t+U+2];a[o+U]=A<<4|E>>>4,a[o+U+1]=E<<4|I>>>4,a[o+U+2]=I<<4|A>>>4}else{s+=8;var B,D,k,M=[t,0,0,0],N=new Uint16Array(32770),F=[3857,3856,3599,3342,3085,2828,2571,2314,2057,1800,1543,1286,1029,772,771,768,514,513],G=0,x=i.decode._ljpeg_diff;for(N[0]=15,B=U=0;U<18;U++)for(var S=32768>>>(F[U]>>>8),L=0;L<S;L++)N[++B]=F[U];for(D=f;D--;)for(k=0;k<s+1;k+=2)if(k==s&&(k=1),G+=x(e,M,N),k<s){var C=4095&G;i.decode._putsF(a,(k*f+D)*h,C<<16-h)}}},i.decode._decodeNikon=function(r,e,t,n,a,o,f){var s=[[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,5,4,3,6,2,7,1,0,8,9,11,10,12],[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,57,90,56,39,22,5,4,3,2,1,0,11,12,12],[0,0,1,4,2,3,1,2,0,0,0,0,0,0,0,0,0,5,4,6,3,7,2,8,1,9,0,10,11,12],[0,0,1,4,3,1,1,1,1,1,2,0,0,0,0,0,0,5,6,4,7,8,3,9,2,1,0,10,11,12,13,14],[0,0,1,5,1,1,1,1,1,1,1,2,0,0,0,0,0,8,92,75,58,41,7,6,5,4,3,2,1,0,13,14],[0,0,1,4,2,2,3,1,2,0,0,0,0,0,0,0,0,7,6,8,5,9,4,10,3,11,12,2,0,1,13,14]],h=r.t256[0],d=r.t257[0],u=r.t258[0],c=0,l=0,v=i.decode._make_decoder,g=i.decode._getbithuff,w=e[0].exifIFD.makerNote,_=w.t150?w.t150:w.t140,p=0,b=_[p++],m=_[p++];73!=b&&88!=m||(p+=2110),70==b&&(c=2),14==u&&(c+=3);for(var y=[[0,0],[0,0]],U=r.isLE?i._binLE:i._binBE,E=0;E<2;E++)for(var A=0;A<2;A++)y[E][A]=U.readShort(_,p),p+=2;var I,B,D,k,M,N=1<<u&32767,F=0,G=U.readShort(_,p);p+=2,G>1&&(F=Math.floor(N/(G-1))),68==b&&32==m&&F>0&&(l=U.readShort(_,562));var x=[0,0],S=v(s[c]),L=[n,0,0,0];for(I=0;I<d;I++)for(l&&I==l&&(S=v(s[c+1])),B=0;B<h;B++){E=g(t,L,S[0],S),(M=1+(g(t,L,(D=15&E)-(k=E>>>4),0)<<1)<<k>>>1)&1<<D-1||(M-=(1<<D)-(0==k?1:0)),B<2?x[B]=y[1&I][B]+=M:x[1&B]+=M;var C=Math.min(Math.max(x[1&B],0),(1<<u)-1),O=(I*h+B)*u;i.decode._putsF(o,O,C<<16-u)}},i.decode._putsF=function(r,e,t){t<<=8-(7&e);var i=e>>>3;r[i]|=t>>>16,r[i+1]|=t>>>8,r[i+2]|=t},i.decode._getbithuff=function(r,e,t,n){var a;i.decode._get_byte;var o=e[0],f=e[1],s=e[2],h=e[3];if(0==t||s<0)return 0;for(;!h&&s<t&&-1!=(a=r[o++])&&!(h=0);)f=(f<<8)+a,s+=8;if(a=f<<32-s>>>32-t,n?(s-=n[a+1]>>>8,a=255&n[a+1]):s-=t,s<0)throw"e";return e[0]=o,e[1]=f,e[2]=s,e[3]=h,a},i.decode._make_decoder=function(r){var e,t,i,n,a,o=[];for(e=16;0!=e&&!r[e];e--);var f=17;for(o[0]=e,i=t=1;t<=e;t++)for(n=0;n<r[t];n++,++f)for(a=0;a<1<<e-t;a++)i<=1<<e&&(o[i++]=t<<8|r[f]);return o},i.decode._decodeNewJPEG=function(r,e,t,n,a,o){var f=r.t347,s=f?f.length:0,h=new Uint8Array(s+n);if(f){for(var d=0,u=0;u<s-1&&(255!=f[u]||217!=f[u+1]);u++)h[d++]=f[u];var c=e[t],l=e[t+1];for(255==c&&216==l||(h[d++]=c,h[d++]=l),u=2;u<n;u++)h[d++]=e[t+u]}else for(u=0;u<n;u++)h[u]=e[t+u];if(32803==r.t262[0]||34892==r.t262[0]){var v=r.t258[0],g=i.LosslessJpegDecode(h),w=g.length;if(16==v)if(r.isLE)for(u=0;u<w;u++)a[o+(u<<1)]=255&g[u],a[o+(u<<1)+1]=g[u]>>>8;else for(u=0;u<w;u++)a[o+(u<<1)]=g[u]>>>8,a[o+(u<<1)+1]=255&g[u];else{if(14!=v&&12!=v)throw new Error("unsupported bit depth "+v);var _=16-v;for(u=0;u<w;u++)i.decode._putsF(a,u*v,g[u]<<_)}}else{var p=new i.JpegDecoder;p.parse(h);var b=p.getData(p.width,p.height);for(u=0;u<b.length;u++)a[o+u]=b[u]}6==r.t262[0]&&(r.t262[0]=2)},i.decode._decodeOldJPEGInit=function(r,e,t,i){var n,a,o,f,s,h=216,d=0,u=0,c=!1,l=r.t513,v=l?l[0]:0,g=r.t514,w=g?g[0]:0,_=r.t324||r.t273||l,p=r.t530,b=0,m=0,y=r.t277?r.t277[0]:1,U=r.t515;if(_&&(u=_[0],c=_.length>1),!c){if(255==e[t]&&e[t+1]==h)return{jpegOffset:t};if(null!=l&&(255==e[t+v]&&e[t+v+1]==h&&(d=t+v),null!=d))return{jpegOffset:d}}if(null!=p&&(b=p[0],m=p[1]),null!=l&&null!=g&&w>=2&&v+w<=u)for(n=255==e[t+v+w-2]&&e[t+v+w-1]==h?new Uint8Array(w-2):new Uint8Array(w),o=0;o<n.length;o++)n[o]=e[t+v+o];if(null==n){var E=0,A=[];A[E++]=255,A[E++]=h;var I=r.t519;if(null==I)throw new Error("JPEGQTables tag is missing");for(o=0;o<I.length;o++)for(A[E++]=255,A[E++]=219,A[E++]=0,A[E++]=67,A[E++]=o,f=0;f<64;f++)A[E++]=e[t+I[o]+f];for(s=0;s<2;s++){var B=r[0==s?"t520":"t521"];if(null==B)throw new Error((0==s?"JPEGDCTables":"JPEGACTables")+" tag is missing");for(o=0;o<B.length;o++){A[E++]=255,A[E++]=196;var D=19;for(f=0;f<16;f++)D+=e[t+B[o]+f];for(A[E++]=D>>>8,A[E++]=255&D,A[E++]=o|s<<4,f=0;f<16;f++)A[E++]=e[t+B[o]+f];for(f=0;f<D;f++)A[E++]=e[t+B[o]+16+f]}}if(A[E++]=255,A[E++]=192,A[E++]=0,A[E++]=8+3*y,A[E++]=8,A[E++]=r.height>>>8&255,A[E++]=255&r.height,A[E++]=r.width>>>8&255,A[E++]=255&r.width,A[E++]=y,1==y)A[E++]=1,A[E++]=17,A[E++]=0;else for(o=0;o<3;o++)A[E++]=o+1,A[E++]=0!=o?17:(15&b)<<4|15&m,A[E++]=o;null!=U&&0!=U[0]&&(A[E++]=255,A[E++]=221,A[E++]=0,A[E++]=4,A[E++]=U[0]>>>8&255,A[E++]=255&U[0]),n=new Uint8Array(A)}var k=-1;for(o=0;o<n.length-1;){if(255==n[o]&&192==n[o+1]){k=o;break}o++}if(-1==k){var M=new Uint8Array(n.length+10+3*y);M.set(n);var N=n.length;if(k=n.length,(n=M)[N++]=255,n[N++]=192,n[N++]=0,n[N++]=8+3*y,n[N++]=8,n[N++]=r.height>>>8&255,n[N++]=255&r.height,n[N++]=r.width>>>8&255,n[N++]=255&r.width,n[N++]=y,1==y)n[N++]=1,n[N++]=17,n[N++]=0;else for(o=0;o<3;o++)n[N++]=o+1,n[N++]=0!=o?17:(15&b)<<4|15&m,n[N++]=o}if(255==e[u]&&218==e[u+1]){var F=e[u+2]<<8|e[u+3];for((a=new Uint8Array(F+2))[0]=e[u],a[1]=e[u+1],a[2]=e[u+2],a[3]=e[u+3],o=0;o<F-2;o++)a[o+4]=e[u+o+4]}else{var G=0;if((a=new Uint8Array(8+2*y))[G++]=255,a[G++]=218,a[G++]=0,a[G++]=6+2*y,a[G++]=y,1==y)a[G++]=1,a[G++]=0;else for(o=0;o<3;o++)a[G++]=o+1,a[G++]=o<<4|o;a[G++]=0,a[G++]=63,a[G++]=0}return{jpegOffset:t,tables:n,sosMarker:a,sofPosition:k}},i.decode._decodeOldJPEG=function(r,e,t,n,a,o){var f,s,h,d,u=i.decode._decodeOldJPEGInit(r,e,t,n);if(null!=u.jpegOffset)for(f=t+n-u.jpegOffset,h=new Uint8Array(f),v=0;v<f;v++)h[v]=e[u.jpegOffset+v];else{for(s=u.tables.length,(h=new Uint8Array(s+u.sosMarker.length+n+2)).set(u.tables),d=s,h[u.sofPosition+5]=r.height>>>8&255,h[u.sofPosition+6]=255&r.height,h[u.sofPosition+7]=r.width>>>8&255,h[u.sofPosition+8]=255&r.width,255==e[t]&&e[t+1]==SOS||(h.set(u.sosMarker,d),d+=sosMarker.length),v=0;v<n;v++)h[d++]=e[t+v];h[d++]=255,h[d++]=EOI}var c=new i.JpegDecoder;c.parse(h);for(var l=c.getData(c.width,c.height),v=0;v<l.length;v++)a[o+v]=l[v];r.t262&&6==r.t262[0]&&(r.t262[0]=2)},i.decode._decodePackBits=function(r,e,t,i,n){for(var a=new Int8Array(r.buffer),o=new Int8Array(i.buffer),f=e+t;e<f;){var s=a[e];if(e++,s>=0&&s<128)for(var h=0;h<s+1;h++)o[n]=a[e],n++,e++;if(s>=-127&&s<0){for(h=0;h<1-s;h++)o[n]=a[e],n++;e++}}},i.decode._decodeThunder=function(r,e,t,i,n){for(var a=[0,1,0,-1],o=[0,1,2,3,0,-3,-2,-1],f=e+t,s=2*n,h=0;e<f;){var d=r[e],u=d>>>6,c=63&d;if(e++,3==u&&(h=15&c,i[s>>>1]|=h<<4*(1-s&1),s++),0==u)for(var l=0;l<c;l++)i[s>>>1]|=h<<4*(1-s&1),s++;if(2==u)for(l=0;l<2;l++)4!=(v=c>>>3*(1-l)&7)&&(h+=o[v],i[s>>>1]|=h<<4*(1-s&1),s++);if(1==u)for(l=0;l<3;l++){var v;2!=(v=c>>>2*(2-l)&3)&&(h+=a[v],i[s>>>1]|=h<<4*(1-s&1),s++)}}},i.decode._dmap={1:0,"011":1,"000011":2,"0000011":3,"010":-1,"000010":-2,"0000010":-3},i.decode._lens=function(){var r=function(r,e,t,i){for(var n=0;n<e.length;n++)r[e[n]]=t+n*i},e="00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100",t="0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111",i="11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011",n="0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,0000001011011,0000001100100,0000001100101",a="00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111";e=e.split(","),t=t.split(","),i=i.split(","),n=n.split(","),a=a.split(",");var o={},f={};return r(o,e,0,1),r(o,i,64,64),r(o,a,1792,64),r(f,t,0,1),r(f,n,64,64),r(f,a,1792,64),[o,f]}(),i.decode._decodeG4=function(r,e,t,n,a,o,f){for(var s=i.decode,h=e<<3,d=0,u="",c=[],l=[],v=0;v<o;v++)l.push(0);l=s._makeDiff(l);for(var g=0,w=0,_=0,p=0,b=0,m=0,y="",U=0,E=8*Math.ceil(o/8);h>>>3<e+t;){_=s._findDiff(l,g+(0==g?0:1),1-b),p=s._findDiff(l,_,b);var A=0;if(1==f&&(A=r[h>>>3]>>>7-(7&h)&1),2==f&&(A=r[h>>>3]>>>(7&h)&1),h++,u+=A,"H"==y){if(null!=s._lens[b][u]){var I=s._lens[b][u];u="",d+=I,I<64&&(s._addNtimes(c,d,b),g+=d,b=1-b,d=0,0==--U&&(y=""))}}else"0001"==u&&(u="",s._addNtimes(c,p-g,b),g=p),"001"==u&&(u="",y="H",U=2),null!=s._dmap[u]&&(w=_+s._dmap[u],s._addNtimes(c,w-g,b),g=w,u="",b=1-b);c.length==o&&""==y&&(s._writeBits(c,n,8*a+m*E),b=0,m++,g=0,l=s._makeDiff(c),c=[])}},i.decode._findDiff=function(r,e,t){for(var i=0;i<r.length;i+=2)if(r[i]>=e&&r[i+1]==t)return r[i]},i.decode._makeDiff=function(r){var e=[];1==r[0]&&e.push(0,1);for(var t=1;t<r.length;t++)r[t-1]!=r[t]&&e.push(t,r[t]);return e.push(r.length,0,r.length,1),e},i.decode._decodeG3=function(r,e,t,n,a,o,f){for(var s=i.decode,h=e<<3,d=0,u="",c=[],l=[],v=0;v<o;v++)c.push(0);for(var g=0,w=0,_=0,p=0,b=0,m=-1,y="",U=0,E=!1,A=8*Math.ceil(o/8);h>>>3<e+t;){_=s._findDiff(l,g+(0==g?0:1),1-b),p=s._findDiff(l,_,b);var I=0;if(1==f&&(I=r[h>>>3]>>>7-(7&h)&1),2==f&&(I=r[h>>>3]>>>(7&h)&1),h++,u+=I,E){if(null!=s._lens[b][u]){var B=s._lens[b][u];u="",d+=B,B<64&&(s._addNtimes(c,d,b),b=1-b,d=0)}}else"H"==y?null!=s._lens[b][u]&&(B=s._lens[b][u],u="",d+=B,B<64&&(s._addNtimes(c,d,b),g+=d,b=1-b,d=0,0==--U&&(y=""))):("0001"==u&&(u="",s._addNtimes(c,p-g,b),g=p),"001"==u&&(u="",y="H",U=2),null!=s._dmap[u]&&(w=_+s._dmap[u],s._addNtimes(c,w-g,b),g=w,u="",b=1-b));u.endsWith("000000000001")&&(m>=0&&s._writeBits(c,n,8*a+m*A),1==f&&(E=1==(r[h>>>3]>>>7-(7&h)&1)),2==f&&(E=1==(r[h>>>3]>>>(7&h)&1)),h++,null==s._decodeG3.allow2D&&(s._decodeG3.allow2D=E),s._decodeG3.allow2D||(E=!0,h--),u="",b=0,m++,g=0,l=s._makeDiff(c),c=[])}c.length==o&&s._writeBits(c,n,8*a+m*A)},i.decode._addNtimes=function(r,e,t){for(var i=0;i<e;i++)r.push(t)},i.decode._writeBits=function(r,e,t){for(var i=0;i<r.length;i++)e[t+i>>>3]|=r[i]<<7-(t+i&7)},i.decode._decodeLZW=function(r,e,t,n){if(null==i.decode._lzwTab){for(var a=new Uint32Array(65535),o=new Uint16Array(65535),f=new Uint8Array(2e6),s=0;s<256;s++)f[s<<2]=s,a[s]=s<<2,o[s]=1;i.decode._lzwTab=[a,o,f]}for(var h=i.decode._copyData,d=i.decode._lzwTab[0],u=i.decode._lzwTab[1],c=(f=i.decode._lzwTab[2],258),l=1032,v=9,g=e<<3,w=0,_=0;w=(r[g>>>3]<<16|r[g+8>>>3]<<8|r[g+16>>>3])>>24-(7&g)-v&(1<<v)-1,g+=v,257!=w;){if(256==w){if(v=9,c=258,l=1032,w=(r[g>>>3]<<16|r[g+8>>>3]<<8|r[g+16>>>3])>>24-(7&g)-v&(1<<v)-1,g+=v,257==w)break;t[n]=w,n++}else if(w<c){var p=d[w],b=u[w];h(f,p,t,n,b),n+=b,_>=c?(d[c]=l,f[d[c]]=p[0],u[c]=1,l=l+1+3&-4,c++):(d[c]=l,h(f,d[_],f,l,m=u[_]),f[l+m]=f[p],m++,u[c]=m,c++,l=l+m+3&-4),c+1==1<<v&&v++}else{var m;_>=c?(d[c]=l,u[c]=0,c++):(d[c]=l,h(f,d[_],f,l,m=u[_]),f[l+m]=f[l],m++,u[c]=m,c++,h(f,l,t,n,m),n+=m,l=l+m+3&-4),c+1==1<<v&&v++}_=w}},i.decode._copyData=function(r,e,t,i,n){for(var a=0;a<n;a+=4)t[i+a]=r[e+a],t[i+a+1]=r[e+a+1],t[i+a+2]=r[e+a+2],t[i+a+3]=r[e+a+3]},i.tags={},i.ttypes={256:3,257:3,258:3,259:3,262:3,273:4,274:3,277:3,278:4,279:4,282:5,283:5,284:3,286:5,287:5,296:3,305:2,306:2,338:3,513:4,514:4,34665:4},i._readIFD=function(r,e,t,n,a,o){var f=r.readUshort(e,t);t+=2;var s={};n.push(s),o&&("   ".repeat(a),n.length);for(var h=0;h<f;h++){var u=r.readUshort(e,t);t+=2;var c=r.readUshort(e,t);t+=2;var l=r.readUint(e,t);t+=4;var v=r.readUint(e,t);t+=4;var g=[];if(1!=c&&7!=c||(g=new Uint8Array(e.buffer,l<5?t-4:v,l)),2==c){var w=l<5?t-4:v;e[w]<128?g.push(r.readASCII(e,w,l-1)):g=new Uint8Array(e.buffer,w,l-1)}if(3==c)for(var _=0;_<l;_++)g.push(r.readUshort(e,(l<3?t-4:v)+2*_));if(4==c)for(_=0;_<l;_++)g.push(r.readUint(e,(l<2?t-4:v)+4*_));if(5==c)for(_=0;_<l;_++)g.push(r.readUint(e,v+8*_)/r.readUint(e,v+8*_+4));if(8==c)for(_=0;_<l;_++)g.push(r.readShort(e,(l<3?t-4:v)+2*_));if(9==c)for(_=0;_<l;_++)g.push(r.readInt(e,(l<2?t-4:v)+4*_));if(10==c)for(_=0;_<l;_++)g.push(r.readInt(e,v+8*_)/r.readInt(e,v+8*_+4));if(11==c)for(_=0;_<l;_++)g.push(r.readFloat(e,v+4*_));if(12==c)for(_=0;_<l;_++)g.push(r.readDouble(e,v+8*_));if(s["t"+u]=g,0!=l&&0==g.length&&d("unknown TIFF tag type: ",c,"num:",l),o&&d("   ".repeat(a),u,c,i.tags[u],g),330==u&&s.t272&&"DSLR-A100"==s.t272[0]);else if(330==u||34665==u||50740==u&&r.readUshort(e,r.readUint(g,0))<300){var p=50740==u?[r.readUint(g,0)]:g,b=[];for(_=0;_<p.length;_++)i._readIFD(r,e,p[_],b,a+1,o);330==u&&(s.subIFD=b),34665==u&&(s.exifIFD=b[0]),50740==u&&(s.dngPrvt=b[0])}if(37500==u){var m=g;if("Nikon"==r.readASCII(m,0,5))s.makerNote=i.decode(m.slice(10).buffer)[0];else if(r.readUshort(e,v)<300){var y=[];i._readIFD(r,e,v,y,a+1,o),s.makerNote=y[0]}}}return o&&"   ".repeat(a),t},i._writeIFD=function(r,e,t,n){var a=Object.keys(n);r.writeUshort(e,t,a.length);for(var o=(t+=2)+12*a.length+4,f=0;f<a.length;f++){var s=a[f],h=parseInt(s.slice(1)),d=i.ttypes[h];if(null==d)throw new Error("unknown type of tag: "+h);var u=n[s];2==d&&(u=u[0]+"\0");var c=u.length;r.writeUshort(e,t,h),t+=2,r.writeUshort(e,t,d),t+=2,r.writeUint(e,t,c);var l=[-1,1,1,2,4,8,0,0,0,0,0,0,8][d]*c,v=t+=4;if(l>4&&(r.writeUint(e,t,o),v=o),2==d&&r.writeASCII(e,v,u),3==d)for(var g=0;g<c;g++)r.writeUshort(e,v+2*g,u[g]);if(4==d)for(g=0;g<c;g++)r.writeUint(e,v+4*g,u[g]);if(5==d)for(g=0;g<c;g++)r.writeUint(e,v+8*g,Math.round(1e4*u[g])),r.writeUint(e,v+8*g+4,1e4);if(12==d)for(g=0;g<c;g++)r.writeDouble(e,v+8*g,u[g]);l>4&&(o+=l+=1&l),t+=4}return[t,o]},i.toRGBA8=function(r){var e=r.width,t=r.height,i=e*t,n=4*i,a=r.data,o=new Uint8Array(4*i),f=r.t262?r.t262[0]:2,s=r.t258?Math.min(32,r.t258[0]):1;if(0==f)for(var h=Math.ceil(s*e/8),d=0;d<t;d++){var u=d*h,c=d*e;if(1==s)for(var l=0;l<e;l++){var v=c+l<<2,g=a[u+(l>>3)]>>7-(7&l)&1;o[v]=o[v+1]=o[v+2]=255*(1-g),o[v+3]=255}if(4==s)for(l=0;l<e;l++)v=c+l<<2,g=a[u+(l>>1)]>>4-4*(1&l)&15,o[v]=o[v+1]=o[v+2]=17*(15-g),o[v+3]=255;if(8==s)for(l=0;l<e;l++)v=c+l<<2,g=a[u+l],o[v]=o[v+1]=o[v+2]=255-g,o[v+3]=255}else if(1==f)for(h=Math.ceil(s*e/8),d=0;d<t;d++){if(u=d*h,c=d*e,1==s)for(l=0;l<e;l++)v=c+l<<2,g=a[u+(l>>3)]>>7-(7&l)&1,o[v]=o[v+1]=o[v+2]=255*g,o[v+3]=255;if(2==s)for(l=0;l<e;l++)v=c+l<<2,g=a[u+(l>>2)]>>6-2*(3&l)&3,o[v]=o[v+1]=o[v+2]=85*g,o[v+3]=255;if(8==s)for(l=0;l<e;l++)v=c+l<<2,g=a[u+l],o[v]=o[v+1]=o[v+2]=g,o[v+3]=255;if(16==s)for(l=0;l<e;l++)v=c+l<<2,g=a[u+(2*l+1)],o[v]=o[v+1]=o[v+2]=Math.min(255,g),o[v+3]=255}else if(2==f){var w=r.t258?r.t258.length:3;if(8==s){if(4==w)for(l=0;l<n;l++)o[l]=a[l];if(3==w)for(l=0;l<i;l++){var _=3*l;o[v=l<<2]=a[_],o[v+1]=a[_+1],o[v+2]=a[_+2],o[v+3]=255}}else{if(4==w)for(l=0;l<i;l++)_=8*l+1,o[v=l<<2]=a[_],o[v+1]=a[_+2],o[v+2]=a[_+4],o[v+3]=a[_+6];if(3==w)for(l=0;l<i;l++)_=6*l+1,o[v=l<<2]=a[_],o[v+1]=a[_+2],o[v+2]=a[_+4],o[v+3]=255}}else if(3==f){var p=r.t320;for(l=0;l<i;l++){v=l<<2;var b=a[l];o[v]=p[b]>>8,o[v+1]=p[256+b]>>8,o[v+2]=p[512+b]>>8,o[v+3]=255}}else if(5==f){var m=(w=r.t258?r.t258.length:4)>4?1:0;for(l=0;l<i;l++){v=l<<2;var y=l*w,U=255-a[y],E=255-a[y+1],A=255-a[y+2],I=(255-a[y+3])*(1/255);o[v]=~~(U*I+.5),o[v+1]=~~(E*I+.5),o[v+2]=~~(A*I+.5),o[v+3]=255*(1-m)+a[y+4]*m}}return o},i.replaceIMG=function(r){null==r&&(r=document.getElementsByTagName("img"));for(var e=["tif","tiff","dng","cr2","nef"],t=0;t<r.length;t++){var n=r[t],a=n.getAttribute("src");if(null!=a){var o=a.split(".").pop().toLowerCase();if(-1!=e.indexOf(o)){var f=new XMLHttpRequest;i._xhrs.push(f),i._imgs.push(n),f.open("GET",a),f.responseType="arraybuffer",f.onload=i._imgLoaded,f.send()}}}},i._xhrs=[],i._imgs=[],i._imgLoaded=function(r){var e=r.target.response,t=i.decode(e),n=t,a=0,o=n[0];t[0].subIFD&&(n=n.concat(t[0].subIFD));for(var f=0;f<n.length;f++)if(!(null==(l=n[f]).t258||l.t258.length<3)){var s=l.t256*l.t257;s>a&&(a=s,o=l)}i.decodeImage(e,o,t);var h=i.toRGBA8(o),d=o.width,u=o.height,c=i._xhrs.indexOf(r.target),l=i._imgs[c];i._xhrs.splice(c,1),i._imgs.splice(c,1);var v=document.createElement("canvas");v.width=d,v.height=u;var g=v.getContext("2d"),w=g.createImageData(d,u);for(f=0;f<h.length;f++)w.data[f]=h[f];g.putImageData(w,0,0),l.setAttribute("src",v.toDataURL())},i._binBE={nextZero:function(r,e){for(;0!=r[e];)e++;return e},readUshort:function(r,e){return r[e]<<8|r[e+1]},readShort:function(r,e){var t=i._binBE.ui8;return t[0]=r[e+1],t[1]=r[e+0],i._binBE.i16[0]},readInt:function(r,e){var t=i._binBE.ui8;return t[0]=r[e+3],t[1]=r[e+2],t[2]=r[e+1],t[3]=r[e+0],i._binBE.i32[0]},readUint:function(r,e){var t=i._binBE.ui8;return t[0]=r[e+3],t[1]=r[e+2],t[2]=r[e+1],t[3]=r[e+0],i._binBE.ui32[0]},readASCII:function(r,e,t){for(var i="",n=0;n<t;n++)i+=String.fromCharCode(r[e+n]);return i},readFloat:function(r,e){for(var t=i._binBE.ui8,n=0;n<4;n++)t[n]=r[e+3-n];return i._binBE.fl32[0]},readDouble:function(r,e){for(var t=i._binBE.ui8,n=0;n<8;n++)t[n]=r[e+7-n];return i._binBE.fl64[0]},writeUshort:function(r,e,t){r[e]=t>>8&255,r[e+1]=255&t},writeUint:function(r,e,t){r[e]=t>>24&255,r[e+1]=t>>16&255,r[e+2]=t>>8&255,r[e+3]=255&t},writeASCII:function(r,e,t){for(var i=0;i<t.length;i++)r[e+i]=t.charCodeAt(i)},writeDouble:function(r,e,t){i._binBE.fl64[0]=t;for(var n=0;n<8;n++)r[e+n]=i._binBE.ui8[7-n]}},i._binBE.ui8=new Uint8Array(8),i._binBE.i16=new Int16Array(i._binBE.ui8.buffer),i._binBE.i32=new Int32Array(i._binBE.ui8.buffer),i._binBE.ui32=new Uint32Array(i._binBE.ui8.buffer),i._binBE.fl32=new Float32Array(i._binBE.ui8.buffer),i._binBE.fl64=new Float64Array(i._binBE.ui8.buffer),i._binLE={nextZero:i._binBE.nextZero,readUshort:function(r,e){return r[e+1]<<8|r[e]},readShort:function(r,e){var t=i._binBE.ui8;return t[0]=r[e+0],t[1]=r[e+1],i._binBE.i16[0]},readInt:function(r,e){var t=i._binBE.ui8;return t[0]=r[e+0],t[1]=r[e+1],t[2]=r[e+2],t[3]=r[e+3],i._binBE.i32[0]},readUint:function(r,e){var t=i._binBE.ui8;return t[0]=r[e+0],t[1]=r[e+1],t[2]=r[e+2],t[3]=r[e+3],i._binBE.ui32[0]},readASCII:i._binBE.readASCII,readFloat:function(r,e){for(var t=i._binBE.ui8,n=0;n<4;n++)t[n]=r[e+n];return i._binBE.fl32[0]},readDouble:function(r,e){for(var t=i._binBE.ui8,n=0;n<8;n++)t[n]=r[e+n];return i._binBE.fl64[0]}},i._copyTile=function(r,e,t,i,n,a,o,f){for(var s=Math.min(e,n-o),h=Math.min(t,a-f),d=0;d<h;d++)for(var u=(f+d)*n+o,c=d*e,l=0;l<s;l++)i[u+l]=r[c+l]},i.LosslessJpegDecode=function(){function r(r){this.w=r,this.N=0,this._=0,this.G=0}r.prototype={t:function(r){this.N=Math.max(0,Math.min(this.w.length,r))},i:function(){return this.w[this.N++]},l:function(){var r=this.N;return this.N+=2,this.w[r]<<8|this.w[r+1]},J:function(){return 0==this._&&(this.G=this.w[this.N],this.N+=1+(this.G+1>>>8),this._=8),this.G>>>--this._&1},Z:function(r){var e=this._,t=this.G,i=Math.min(e,r);r-=i;for(var n=t>>>(e-=i)&(1<<i)-1;r>0;)t=this.w[this.N],this.N+=1+(t+1>>>8),r-=i=Math.min(8,r),n<<=i,n|=t>>>(e=8-i)&(1<<i)-1;return this._=e,this.G=t,n}};var e={};function t(e){this.z=new r(e),this.D(this.z)}return e.X=function(){return[0,0,-1]},e.s=function(r,t,i){r[e.Y(r,0,i)+2]=t},e.Y=function(r,t,i){if(-1!=r[t+2])return 0;if(0==i)return t;for(var n=0;n<2;n++){0==r[t+n]&&(r[t+n]=r.length,r.push(0),r.push(0),r.push(-1));var a=e.Y(r,r[t+n],i-1);if(0!=a)return a}return 0},e.B=function(r,e){for(var t=0,i=0,n=e._,a=e.G,o=e.N;;)if(0==n&&(o+=1+((a=e.w[o])+1>>>8),n=8),-1!=(i=r[(t=r[t+(a>>>--n&1)])+2]))return e._=n,e.G=a,e.N=o,i;return-1},t.prototype={$:function(r,e){this.Q=r.i(),this.F=r.l(),this.o=r.l();var t=this.O=r.i();this.L=[];for(var i=0;i<t;i++){var n=r.i();r.i(),r.i(),this.L[n]=i}r.t(r.N+e-(6+3*t))},e:function(){var r=0,t=this.z.i();null==this.H&&(this.H={});for(var i=this.H[t]=e.X(),n=[],a=0;a<16;a++)n[a]=this.z.i(),r+=n[a];for(a=0;a<16;a++)for(var o=0;o<n[a];o++)e.s(i,this.z.i(),a+1);return r+17},W:function(r){for(;r>0;)r-=this.e()},p:function(r,e){var t=r.i();this.U||(this.U=[]);for(var i=0;i<t;i++){var n=r.i(),a=r.i();this.U[this.L[n]]=this.H[a>>>4]}this.g=r.i(),r.t(r.N+e-(2+2*t))},D:function(r){var e=!1;if((i=r.l())===t.q)do{var i=r.l(),n=r.l()-2;switch(i){case t.m:this.$(r,n);break;case t.K:this.W(n);break;case t.V:this.p(r,n),e=!0;break;default:r.t(r.N+n)}}while(!e)},I:function(r,t){var i=e.B(t,r);if(16==i)return-32768;var n=r.Z(i);return n&1<<i-1||(n-=(1<<i)-1),n},B:function(r,e){for(var t=this.z,i=this.O,n=this.F,a=this.I,o=this.g,f=this.o*i,s=this.U,h=0;h<i;h++)r[h]=a(t,s[h])+(1<<this.Q-1);for(var d=i;d<f;d+=i)for(h=0;h<i;h++)r[d+h]=a(t,s[h])+r[d+h-i];for(var u=e,c=1;c<n;c++){for(h=0;h<i;h++)r[u+h]=a(t,s[h])+r[u+h-e];for(d=i;d<f;d+=i)for(h=0;h<i;h++){var l=u+d+h,v=r[l-i];6==o&&(v=r[l-e]+(v-r[l-i-e]>>>1)),r[l]=v+a(t,s[h])}u+=e}}},t.m=65475,t.K=65476,t.q=65496,t.V=65498,function(r){var e=new t(r),i=new(e.Q>8?Uint16Array:Uint8Array)(e.o*e.F*e.O),n=e.o*e.O;return e.B(i,n),i}}()}()),n.exports);const f=r(o);export{o as U,f as a};
